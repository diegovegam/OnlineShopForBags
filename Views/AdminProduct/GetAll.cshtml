@model OnlineShopForBags.Models.ViewModels.ProductViewModel
@{

    int nextPage = Convert.ToInt32(ViewBag.PageNumber) + 1;
    int prevPage = Convert.ToInt32(ViewBag.PageNumber) - 1;

}

<form method="get" asp-controller="AdminProduct" asp-action="GetAll">
    <div class="container mt-5">
        <div class="row">
            <div class="col col-md-3 d-flex">
                <input type="text" class="form-control" name="searchQuery" value="@ViewBag.SearchQuery"></input>
                <button type="submit" class="btn btn-secondary ms-3">Buscar</button>
            </div>
        </div>
    </div>
</form>
<div class="container py-5">

    <table class="table">
        <thead>
            <tr>
                <th scope="col">Código</th>
                <th scope="col">Imagen</th>
                <th scope="col">
                    Nombre
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Name" asp-route-sortDirection="Asc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-up"></i>
                            </a>
                        </span>
                    </span>
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Name" asp-route-sortDirection="Desc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-down"></i>
                            </a>
                        </span>
                    </span>
                </th>
                <th scope="col">
                    Precio
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Price" asp-route-sortDirection="Asc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-up"></i>
                            </a>
                        </span>
                    </span>
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Price" asp-route-sortDirection="Desc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-down"></i>
                            </a>
                        </span>
                    </span>
                </th>
                <th scope="col">
                    Cantidad
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Quantity" asp-route-sortDirection="Asc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-up"></i>
                            </a>
                        </span>
                    </span>
                    <span>
                        <span>
                            <a class="btn btn-light" asp-controller="AdminProduct" asp-action="GetAll" asp-route-sortBy="Quantity" asp-route-sortDirection="Desc"
                               asp-route-searchQuery="@ViewBag.SearchQuery" asp-route-pageNumber="@ViewBag.PageNumber">
                                <i class="bi bi-arrow-down"></i>
                            </a>
                        </span>
                    </span>
                </th>
                <th scope="col">Descripción</th>


            </tr>
        </thead>
        <tbody class="table-group-divider">
            @foreach (var product in Model.Products)
            {
                <tr>
                    <td>@product.Code</td>
                    <td><img src="@product.ImageUrl" class="mt-3" id="ImageDisplayList" style="display:block;width: 100px"></td>
                    <td>@product.Name</td>
                    <td>@product.Price</td>
                    <td>@product.Quantity</td>
                    <td>@product.Description</td>
                    <td>
                        <a class="btn btn-warning" asp-area="" asp-controller="AdminProduct" asp-action="Edit" asp-route-Id="@product.Id">
                            Editar
                        </a>

                    </td>
                    <td>
                        <form method="post">
                            <button class="btn btn-danger" type="submit" asp-area="" asp-controller="AdminProduct" asp-action="Delete" asp-route-Id="@product.Id">
                                Eliminar
                            </button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <a class="btn btn-primary" asp-area="" asp-controller="AdminProduct" asp-action="Add">
        Agregar
    </a>
</div>

<nav aria-label="Page navigation example">
    <ul class="pagination">
        <li class="page-item">
            <a class="page-link" asp-controller="AdminProduct" asp-action="GetAll"
               asp-route-pageNumber="@prevPage" asp-route-sortBy="@ViewBag.sortBy" asp-route-sortDirection="@ViewBag.sortDirection" asp-route-searchQuery="@ViewBag.SearchQuery">Anterior</a>
        </li>
        @for (int i = 1; i <= ViewBag.TotalPages; i++)
        {
            <li class="page-item">
                <a class="page-link" asp-controller="AdminProduct" asp-action="GetAll"
                   asp-route-pageNumber="@i" asp-route-sortBy="@ViewBag.sortBy" asp-route-sortDirection="@ViewBag.sortDirection" asp-route-searchQuery="@ViewBag.SearchQuery">@i</a>
            </li>
        }

        <li class="page-item">
            <a class="page-link" asp-controller="AdminProduct" asp-action="GetAll"
               asp-route-pageNumber="@nextPage" asp-route-sortBy="@ViewBag.sortBy" asp-route-sortDirection="@ViewBag.sortDirection" asp-route-searchQuery="@ViewBag.SearchQuery">Siguiente</a>
        </li>
    </ul>
</nav>



